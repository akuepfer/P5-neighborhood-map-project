var auth={consumerKey:"9Vtw_SjZAv8H-7sayVjtyg",consumerSecret:"dvbjzZNq03nTFCf4NuqyEjTzibI",accessToken:"TCYdRHfPmjpP3MBnHSIpk3jikLk1JTtM",accessTokenSecret:"5FCaTJgjwJ0iP95QM41nhmMJgB4",serviceProvider:{signatureMethod:"HMAC-SHA1"}};yelpSearch=function(term,location,callback,errorCallback){var accessor={consumerSecret:auth.consumerSecret,tokenSecret:auth.accessTokenSecret};parameters=[],parameters.push(["term",term]),parameters.push(["location",location]),parameters.push(["callback","cb"]),parameters.push(["oauth_consumer_key",auth.consumerKey]),parameters.push(["oauth_consumer_secret",auth.consumerSecret]),parameters.push(["oauth_token",auth.accessToken]),parameters.push(["oauth_signature_method","HMAC-SHA1"]);var message={action:"http://api.yelp.com/v2/search",method:"GET",parameters:parameters};OAuth.setTimestampAndNonce(message),OAuth.SignatureMethod.sign(message,accessor);var parameterMap=OAuth.getParameterMap(message.parameters);parameterMap.oauth_signature=OAuth.percentEncode(parameterMap.oauth_signature),console.log(parameterMap),$.ajax({url:message.action,data:parameterMap,cache:!0,timeout:5e3,dataType:"jsonp",jsonpCallback:"cb",success:function(data,textStats,XMLHttpRequest){console.log(data),callback(data)},error:function(jqXHR,textStatus,errorThrown){errorCallback(textStatus,errorThrown)}})};