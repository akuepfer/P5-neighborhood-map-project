function ViewModel(){var self=this;self.availableKeywords=ko.observableArray([new Keyword("All","all"),new Keyword("Capital","capital"),new Keyword("City","city"),new Keyword("Domicile","domicile"),new Keyword("Tourist attraction","attraction"),new Keyword("Mountain","mountain"),new Keyword("Sports","sport"),new Keyword("Place of interest","science"),new Keyword("Science","science")]),self.selectedKeyword=ko.observable({name:"All",ident:"all"}),self.selectedKeyword.subscribe(function(newValue){console.log("selected keyword "+newValue.name),markerKeywordMatch(newValue.ident)}),self.searchInput=ko.observable(""),self.searchInput.subscribe(function(newValue){console.log("new Value "+newValue),markerTitleMatch(newValue)}),self.additionalInfo="info",self.additionalInfoSelect=ko.observable(),self.additionalInfoSelect.subscribe(function(newValue){console.log("additionalInfoSelect "+newValue),self.additionalInfo=newValue}),self.searchResult=ko.observableArray([]),self.showInfoText=ko.observable(!1),self.infoTitle=ko.observable(),self.infoText=ko.observable(),self.infoUrl=ko.observable(),self.showYelpInfoText=ko.observable(!1),self.yelpSearchResult=ko.observableArray([]),self.showMeetupInfoText=ko.observable(!1),self.meetupSearchResult=ko.observableArray([]),showSearchInput=function(){$("#search_input").fadeIn("slow")},hideSearchInput=function(){$("#search_input").fadeOut("slow")},self.showInfoWindow=function(selectPin){selectPin.markSelected(),$(window).width()<800&&$("#search_input").fadeOut("slow"),"info"===self.additionalInfo?self.showInfoTextWindow(selectPin):"yelp"===self.additionalInfo?self.showYelpInfoWindow(selectPin):self.showMeetupInfoWindow(selectPin)},self.showInfoTextWindow=function(selectedMapPin){self.infoTitle(selectedMapPin.place.title),self.infoText(selectedMapPin.place.text),self.infoUrl(selectedMapPin.place.url),showMapInfoWindow(selectedMapPin,"#textInfoWindow")},self.showYelpInfoWindow=function(selectedMapPin){self.infoTitle(selectedMapPin.place.title),self.yelpSearchResult.removeAll(),searchYelp(selectedMapPin,self.yelpSearchResult)},self.showMeetupInfoWindow=function(selectedMapPin){self.infoTitle(selectedMapPin.place.title),self.meetupSearchResult.removeAll(),searchMeetup(selectedMapPin,self.meetupSearchResult)}}function imageUrl(image){return void 0===image?"images/user_medium_square.png":image}var Keyword=function(name,keyword){this.name=name,this.ident=keyword};ViewModel.prototype.showInfoWindowFoward=function(selectedPin){vm.showInfoWindow(selectedPin)},ViewModel.prototype.addSearchResult=function(pin){this.searchResult.push(pin)},ViewModel.prototype.removeSearchResults=function(){this.searchResult.removeAll()};var vm=new ViewModel;ko.applyBindings(vm),$("#infoId").prop("checked",!0);